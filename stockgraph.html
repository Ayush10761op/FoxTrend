<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src='https://cdn.plot.ly/plotly-2.32.0.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link rel="stylesheet" href="graphss.css">
</head>
<body>
    <div id="myplot" style="width:100%; height:100%;"></div>
    <button id="stp">Show Full Graph</button>
    <script>
        Papa.parse("stock_data.csv", {
            download: true,
            header: true,
            complete: function(results) {
                const xarray = [];
                const yarray = [];
                
                results.data.forEach(row => {
                    xarray.push(row['Date']);
                    yarray.push(parseFloat(row['Close']));
                });
                
                const data=[{
                    x:xarray,
                    y:[],
                    mode:"lines",
                    type:"scatter",
                    fill:"tozeroy",
                    fillgradient:{
                        type: 'vertical',
                        colorscale: [[0,'rgba(0,0,0,0)'], [1,'rgba(96,0,147,1)']],
                    },
                    line:{
                        width:2
                    }
                }];
                const layout={
                    xaxis:{range:[xarray[0], xarray[xarray.length-1]],title:{
                        text:"Date",
                        font:{
                            color:"white"
                        }
                       },
                        tickfont:{
                            color:"white"
                        }
                    },
                    yaxis:{range:[0, Math.max(...yarray)+20],title:{text:"Prices",
                        font:{
                            color:"white"
                        }
                    },
                        tickfont:{
                            color:"white"
                        }
                    },
                    colorway:['#7834a8'],
                    plot_bgcolor:"black",
                    paper_bgcolor:"black",
                };
                
                Plotly.newPlot("myplot",data,layout);
                let i=0;let id;
                function animate(){
                    if(i<xarray.length){
                        Plotly.extendTraces("myplot",{
                        x:[[xarray[i]]],
                        y:[[yarray[i]]]
                    },[0])
                    i++;
                   id=requestAnimationFrame(animate);
                    }
                }
                animate();

                const stp=document.getElementById("stp");
                stp.addEventListener("click",func);
                function func(){
                    Plotly.react("myplot",[{
                      x:xarray,
                      y:yarray,
                     mode:"lines",
                    type:"scatter",
                    fill:"tozeroy",
                    fillgradient:{
                        type: 'vertical',
                        colorscale: [[0,'rgba(0,0,0,0)'], [1,'rgba(96,0,147,1)']],
                    },
                    line:{
                        width:2
                    }
                    }],layout)
                    cancelAnimationFrame(id);
                }
            }
        });
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src='https://cdn.plot.ly/plotly-2.32.0.min.js'></script>
    <link rel="stylesheet" href="graphss.css">
</head>
<body>
    <div id="myplot" style="width:100%; height:100%;"></div>
    <script>
        xarray=["2024-07-29","2024-07-30","2024-07-31","2024-08-01","2024-08-02","2024-08-03","2024-08-04","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-10","2024-08-11","2024-08-12","2024-08-13","2024-08-14","2024-08-15","2024-08-16","2024-08-17","2024-08-18","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-24","2024-08-25","2024-08-26","2024-08-27","2024-08-28"];
        yarray=[226.60476,222.806015,221.182678,225.559143,226.534698,226.956039,229.608612,237.411652,232.815750,232.135910,242.408142,274.186005,279.610077,274.633820,270.552551,268.802094,269.092560,267.591614,262.254272,261.662964,262.202271,267.316254,265.886932,266.987152,268.204834,265.905396,267.251282,253.899826,269.423767,269.264648,296.886322];
        const data=[{
            x:xarray,
            y:yarray,
            mode:"lines",
            type:"scatter",
            fill:"tozeroy",
            fillgradient:{
                type: 'vertical',
                colorscale: [[0,'rgba(0,0,0,0)'], [1,'rgba(96,0,147,1)']],
            },
            line:{
                width:4
            }
        }];
        const frames=xarray.map((x,i)=>({
           data:[{
            x:xarray.slice(0,i+1),
            y:yarray.slice(0,i+1)
          }],
        }));
        const layout={
            xaxis:{range:["2024-07-29","2024-08-28"],title:{
                text:"Date",
                font:{
                    color:"white"
                }
               },
                tickfont:{
                    color:"white"
                }
            },
            yaxis:{range:[0,300],title:{text:"Prices",
                font:{
                    color:"white"
                }
            },
                tickfont:{
                    color:"white"
                }
            },
            colorway:['#7834a8'],
            plot_bgcolor:"black",
            paper_bgcolor:"black",
            updatemenus: [{
      x: 0.1,
      y: 0,
      yanchor: "top",
      xanchor: "right",
      showactive: false,
      direction: "left",
      type: "button",
      pad: {"t": 87, "r": 10},
      buttons: [{
        method: "animate",
        args: [null, {
          fromcurrent: true,
          transition: {
            duration: 0,
          },
          frame: {
            duration: 50,
            redraw: false
          }
        }],
        label: "Play"
      }, {
        method: "animate",
        args: [
          [null],
          {
            mode: "immediate",
            transition: {
              duration: 0
            },
            frame: {
              duration: 0,
              redraw: false
            }
          }
        ],
        label: "Pause"
      }]
    }]
        }
        Plotly.newPlot("myplot",data,layout).then(function(){
            Plotly.addFrames('myplot',frames)
        })
    </script>
</body>
</html>
